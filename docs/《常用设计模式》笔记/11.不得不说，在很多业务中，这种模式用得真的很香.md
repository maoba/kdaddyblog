---
title: 不得不说，在很多业务中，这种模式用得真的很香
date: 2024-04-24 22:31:58
permalink: /pages/32af5c/
categories:
  - 《常用设计模式》笔记
tags:
  - 策略模式
author: 
  name: 老猫
  link: https://github.com/maoba
---
## 故事
“不能在写if else来拓展当前系统了，现在已经有三个支付场景了......”工位上，小猫看着电脑，挠着头。

就在刚刚，小猫接到了一个新需求，需要和客户公司打通资产，形成资产联动。说白了就是需要定制化对接客户公司的支付资产体系。除了这次接到的之外。前面其实已经对接了三家了。由于每家对接规范都不一样，历史对接的时候为了尽快上线，都是直接搞个else的新路由分支，然后去实现支付，退款。

在小猫看来，就是在堆屎山。牵一发而动全身的感觉真的很不好。由于本次的需求其实不是非常紧急，所以小猫下定决心，打算利用这次的拓展，将原来不合理的地方用上设计模式将其重构掉。

深思熟虑很久，小猫下定决心打算用“策略模式”重构一番。

## 聊聊策略模式
说到策略模式，老猫觉得这种设计模式在实际开发中使用其实是相当频繁的。老猫工作到现在也在很多业务场景中使用过这样的设计模式。例如，上述小猫遇到的第三方支付集成的问题上。另外的还有商城搞活动，针对不同的用户下单行为提供不同的折扣或者返现等活动。再例如商城运营人员根据不同的加价策略去定在售商品的价格等。

老猫工作十年中，对接过很多外部企业或者单位的接口，凡是业务性质一样，只是接口协议不同的业务其实往往都可以用到策略模式。在很多业务中，这种模式用起来真的很香，既能够摆脱成堆的“if else”（当然关于 if else的优化,又是另外一个故事了，有兴趣的小伙伴可以看看这篇文章【[接手了个项目，被if..else搞懵逼了](https://mp.weixin.qq.com/s/Z5RhBJnVye9KgdnusIp3kQ)】），另外写出来的代码本身拓展性也会比较好。

那么我们来看看策略模式，并且基于小猫遇到的场景问题，咱们来撸一下实现代码。